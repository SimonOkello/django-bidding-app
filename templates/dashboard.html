{% extends 'base.html' %}

{% block content %}
{% include 'nav.html' %}

              
{% load static %}

<section class="section">
    <section class="container">
        <section class="row">
            <div class="col l3 s12">
                <div class="card">
                    <div class="card-content center">
                        <p class="chip">Total Users</p>
                        <h4>33</h4>
                    </div>
                </div>
            </div>
            <div class="col l3 s12">
                <div class="card">
                        <div class="card-content center">
                                <p class="chip">Total Companies</p>
                                <h4 id="total_companies">33</h4>
                            </div>
                </div>
            </div>
            <div class="col l3 s12">
                <div class="card">
                        <div class="card-content center">
                                <p class="chip">Total Users</p>
                                <h4>33</h4>
                            </div>
                </div>
            </div>
            <div class="col l3 s12">
                    <div class="card">
                    <div class="card-content center">
                            <p class="chip">Total Users</p>
                            <h4>33</h4>
                        </div>
                    </div>
                </div>
        </section>

        <section class="row">
            <div class="col l12 s12">
                <div class="card">
                    <div class="card-content">
                            <canvas id="myChart"></canvas>
                    </div>
                </div>
            </div>
        </section>
    </section>
</section>

{% include 'footer.html' %}

<canvas id="myChart" width="400" height="400"></canvas>
<script>
// Number Incrementer function 
// from https://stackoverflow.com/questions/16994662/count-animation-from-number-a-to-b
function animateValue(id, start, end, duration) {
    var range = end - start;
    var current = start;
    var increment = end > start? 1 : -1;
    var stepTime = Math.abs(Math.floor(duration / range));
    var obj = document.getElementById(id);
    var timer = setInterval(function() {
        current += increment;
        obj.innerHTML = current;
        if (current == end) {
            clearInterval(timer);
        }
    }, stepTime);
}

animateValue("total_companies", 0, 165, 1750);
</script>
<script>
// Chart.js code
var ctx = document.getElementById('myChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.7)',
                'rgba(54, 162, 235, 0.7)',
                'rgba(255, 206, 86, 0.7)',
                'rgba(75, 192, 192, 0.7)',
                'rgba(153, 102, 255, 0.7)',
                'rgba(255, 159, 64, 0.7)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});
</script>

{% endblock content %}
